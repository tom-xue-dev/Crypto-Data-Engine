
FROM python:3.12-slim

RUN pip install poetry

WORKDIR /app

# ğŸ”¥ ä¿®æ­£ï¼šå»æ‰ ../ï¼Œå› ä¸ºæ„å»ºä¸Šä¸‹æ–‡å·²ç»æ˜¯é¡¹ç›®æ ¹ç›®å½•
COPY pyproject.toml poetry.lock* ./

RUN poetry config virtualenvs.create false \
    && poetry install --no-root

COPY src ./src/

ENV PYTHONPATH=/app/src

WORKDIR /app/src

# Default: start the API server
CMD ["python", "-m", "crypto_data_engine.main", "serve", "--host", "0.0.0.0", "--port", "8000"]