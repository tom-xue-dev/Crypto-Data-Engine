# Crypto Quant Data Processing Pipeline

ğŸš€ **æ•°å­—è´§å¸é«˜é¢‘æ•°æ®ä¸‹è½½ä¸é¢„å¤„ç†æµæ°´çº¿**

æœ¬é¡¹ç›®å®ç°äº†å®Œæ•´çš„åŠ å¯†è´§å¸é€ç¬”æˆäº¤æ•°æ®çš„è‡ªåŠ¨ä¸‹è½½ã€æ•°æ®æ¸…æ´—ä¸ Bar é¢„å¤„ç†æµç¨‹ï¼Œæ”¯æŒå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹ã€æ–­ç‚¹ç»­ä¼ ï¼Œå¹¶ä¿ç•™è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼Œé€‚ç”¨äºåç»­å› å­ç ”ç©¶ä¸ç­–ç•¥å¼€å‘ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„
```
project/
â”œâ”€â”€ downloader.yaml               # ä¸‹è½½æ¨¡å—é…ç½®æ–‡ä»¶
â”œâ”€â”€ preprocessor.yaml             # é¢„å¤„ç†æ¨¡å—é…ç½®æ–‡ä»¶
â”œâ”€â”€ Config.py                     # é…ç½®è¯»å–æ¨¡å—
â”œâ”€â”€ downloader_pipeline.py        # æ•°æ®ä¸‹è½½ä¸»ç¨‹åº
â”œâ”€â”€ pre_process.py                # æ•°æ®é¢„å¤„ç†ä¸»ç¨‹åº
â”œâ”€â”€ bar_constructor.py            # Baræ„å»ºç±»
â”œâ”€â”€ path_utils.py                 # è·¯å¾„è¾…åŠ©å‡½æ•°
â”œâ”€â”€ data/                         # ä¸‹è½½çš„åŸå§‹æ•°æ®
â”œâ”€â”€ data_aggr/                    # é¢„å¤„ç†åçš„èšåˆæ•°æ®
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## âš™ï¸ åŠŸèƒ½ç‰¹è‰²
âœ… æ”¯æŒ Binance æœˆåº¦é€ç¬”æˆäº¤æ•°æ®è‡ªåŠ¨ä¸‹è½½  
âœ… å¤šçº¿ç¨‹ä¸‹è½½ + å¤šè¿›ç¨‹è§£å‹è½¬æ¢  
âœ… SHA256 æ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§  
âœ… **æ–­ç‚¹ç»­ä¼ æœºåˆ¶**ï¼Œå¤±è´¥è‡ªåŠ¨è¡¥é½  
âœ… æ•°æ®å­˜å‚¨ç»“æ„æ¸…æ™°ï¼ŒæŒ‰äº¤æ˜“å¯¹åˆ†ç±»  
âœ… æ”¯æŒ Tick Bar, Volume Bar, Dollar Bar èšåˆ  

---

## ğŸ“¥ ä¸‹è½½æ¨¡å—

### é…ç½®æ–‡ä»¶ï¼š`downloader.yaml`
```
data_dir: "./data"
start_date: "2021-01"
end_date: "2021-03"
max_threads: 8
convert_processes: 4
queue_size: 20
symbols: "auto"        # æˆ– ['BTCUSDT', 'ETHUSDT']
filter_suffix: "USDT"
base_url: "https://data.binance.vision/data/spot/monthly/aggTrades"
completed_tasks_file: "./completed_tasks.txt"
```

### è¿è¡Œ
```bash
python downloader_pipeline.py
```

---

## ğŸ› ï¸ é¢„å¤„ç†æ¨¡å—

### é…ç½®æ–‡ä»¶ï¼š`preprocessor.yaml`
```
data_dir: "./data"
aggregated_data_dir: "./data_aggr"
bar_type: "volume_bar"  # å¯é€‰ tick_bar, volume_bar, dollar_bar
threshold: 10000000
process_num_limit: 4
```

### è¿è¡Œ
```bash
python pre_process.py
```

---

## ğŸ¯ è¿è¡Œæ•ˆæœç¤ºä¾‹
```
[Download Progress] â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100/100  ETA: 00:00
âœ… å·²å¤„ç†: 100 / 100
â° æ€»è€—æ—¶: 180.42 ç§’

[Preprocessing Assets] â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 10/10  ETA: 00:00
â° èšåˆå®Œæˆï¼Œå…±å¤„ç† 10 ä¸ªèµ„äº§
```

---

## ğŸ“Œ è®¾è®¡æ€è·¯
- ä¸‹è½½æ¨¡å—é‡‡ç”¨ **Producer-Consumer æ¨¡å‹**ï¼Œé¿å…å†…å­˜å †ç§¯
- é‡‡ç”¨ **JoinableQueue** å®ç°é™æµä¸æ–­ç‚¹ç»­ä¼ 
- **é…ç½®æ–‡ä»¶å…¨å‚æ•°ç®¡ç†**ï¼Œæ”¯æŒçµæ´»è°ƒæ•´
- é¢„å¤„ç†é˜¶æ®µæ”¯æŒ **å¤šè¿›ç¨‹å¹¶è¡Œ**
- **å­˜å‚¨ç»“æ„ä¸“ä¸š**ï¼Œæ¯ä¸ªäº¤æ˜“å¯¹å•ç‹¬æ–‡ä»¶å¤¹ï¼Œä¾¿äºåç»­å› å­ç ”ç©¶

---

## â­ï¸ åç»­æ‰©å±•å»ºè®®
- å› å­ç”Ÿæˆæ¨¡å—
- å› å­æ”¶ç›Šç‡æµ‹è¯•
- æœºå™¨å­¦ä¹ æ ‡ç­¾ä¸è®­ç»ƒæ¨¡å—
- å›æµ‹æ¨¡å—

è¯¥é¡¹ç›®å·²å…·å¤‡ **å®Œæ•´æ•°æ®å¤„ç†åº•åº§**ï¼Œå¯ä½œä¸ºé‡åŒ–ç ”ç©¶é¡¹ç›®åŸºç¡€ã€‚

